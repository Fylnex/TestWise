# TestWise

TestWise — это современная образовательная платформа для создания, управления и прохождения интерактивных тестов, а также для отслеживания прогресса студентов. Проект состоит из двух частей: Backend (FastAPI, Python) и FrontEnd (React, TypeScript).

---

## Оглавление
- [Описание](#описание)
- [Архитектура и компоненты](#архитектура-и-компоненты)
- [Функциональность](#функциональность)
- [Роли пользователей](#роли-пользователей)
- [API и роутеры](#api-и-роутеры)
- [Инструкция по запуску](#инструкция-по-запуску)
- [Структура проекта](#структура-проекта)
- [Контакты](#контакты)

---

## Описание
TestWise — платформа нового поколения для обучения, тестирования и развития. Она объединяет технологии, дизайн и педагогику, чтобы сделать образовательный путь пользователя вдохновляющим и эффективным. Поддерживаются персонализированные траектории обучения, интерактивные тесты, мгновенная обратная связь, аналитика и поддержка на каждом этапе.

---

## Архитектура и компоненты

- **Backend**: FastAPI, Python 3.10+, SQLite, Docker, Poetry
  - REST API для управления пользователями, группами, темами, разделами, подсекциями, вопросами, тестами и прогрессом
  - JWT-аутентификация, разграничение прав по ролям
  - Логирование, бэкапы, восстановление БД
- **FrontEnd**: React, TypeScript, Vite, TailwindCSS
  - Современный SPA-интерфейс
  - Панели для студентов, преподавателей и администраторов
  - Визуальный редактор тестов, управление группами, аналитика

---

## Функциональность

- **Пользовательские роли**: администратор, преподаватель, студент
- **Управление пользователями**: регистрация, аутентификация, восстановление пароля, массовое добавление, экспорт/импорт
- **Группы**: создание, редактирование, добавление/удаление студентов и преподавателей, аналитика по группам
- **Темы и разделы**: иерархия тем, разделов, подсекций, поддержка PDF и текстовых материалов
- **Тесты и вопросы**: создание тестов с разными типами вопросов, конструктор тестов, автоматическая проверка
- **Прогресс**: отслеживание прогресса по темам, разделам, тестам, история попыток
- **Аналитика**: статистика по студентам, группам, темам, активности
- **Права доступа**: разграничение по ролям, гибкая настройка
- **Импорт/экспорт данных**: поддержка массовых операций
- **Безопасность**: JWT, CORS, логирование действий

---

## Роли пользователей

- **Администратор**: полный доступ, управление всеми сущностями, аналитика, экспорт/импорт, просмотр логов
- **Преподаватель**: управление своими группами, темами, тестами, просмотр прогресса студентов
- **Студент**: прохождение тестов, просмотр своего прогресса, изучение материалов

---

## API и роутеры

### Аутентификация (`/api/v1/auth`)
- POST `/login` — вход по логину и паролю, выдача JWT
- POST `/refresh` — обновление access token
- GET `/me` — информация о текущем пользователе

### Пользователи (`/api/v1/users`)
- POST `/` — создать пользователя
- GET `/` — список пользователей (фильтрация по роли)
- GET `/{user_id}` — получить пользователя по ID
- PUT `/{user_id}` — обновить пользователя
- DELETE `/{user_id}` — архивировать пользователя
- POST `/{user_id}/reset-password` — сброс пароля
- PUT `/bulk/roles` — массовое изменение ролей
- PUT `/bulk/status` — массовое изменение статуса
- GET `/export` — экспорт пользователей
- POST/DELETE архив/удаление/восстановление пользователей

### Группы (`/api/v1/groups`)
- GET `/` — список групп
- GET `/{group_id}` — получить группу
- GET `/my` — мои группы (для преподавателя)
- GET `/{group_id}/students` — студенты группы
- GET `/{group_id}/teachers` — учителя группы
- POST `/` — создать группу
- POST `/{group_id}/students` — добавить студентов
- POST `/{group_id}/teachers` — добавить учителей
- PUT/DELETE — обновление, архивирование, удаление групп

### Темы (`/api/v1/topics`)
- POST `/` — создать тему
- GET `/` — список тем
- GET `/{topic_id}` — получить тему
- PUT/DELETE — обновление, архивирование, удаление тем
- GET `/{topic_id}/progress` — прогресс по теме

### Разделы (`/api/v1/sections`)
- POST `/` — создать раздел
- GET `/` — список разделов (по теме)
- GET `/{section_id}` — получить раздел
- PUT/DELETE — обновление, архивирование, удаление разделов
- GET `/{section_id}/progress` — прогресс по разделу
- GET `/{section_id}/subsections` — список подсекций

### Подсекции (`/api/v1/subsections`)
- POST `/` — создать подсекцию (текст или PDF)
- GET/PUT/DELETE — получить, обновить, удалить подсекцию
- POST `/{subsection_id}/view` — отметить как просмотренную
- Архивирование/восстановление/удаление

### Вопросы (`/api/v1/questions`)
- POST `/` — создать вопрос
- GET/PUT/DELETE — получить, обновить, удалить вопрос
- Архивирование/восстановление/удаление

### Тесты (`/api/v1/tests`)
- POST `/` — создать тест
- GET `/` — список тестов (по теме/разделу)
- GET `/{test_id}` — получить тест
- PUT/DELETE — обновление, архивирование, удаление теста
- POST `/{test_id}/start` — начать тест (студент)
- POST `/{test_id}/submit` — отправить ответы
- Архивирование/восстановление/удаление

### Прогресс (`/api/v1/progress`)
- GET `/topics` — прогресс по темам
- GET `/sections` — прогресс по разделам
- GET `/subsections` — прогресс по подсекциям
- GET `/tests` — история попыток тестов

### Профиль (`/api/v1/profile`)
- GET `/` — агрегированный прогресс пользователя
- GET `/my-groups` — мои группы (для преподавателя)

---

## Инструкция по запуску

### Backend

1. Клонируйте репозиторий:
   ```bash
   git clone <repository-url>
   cd TestWise/Backend
   ```
2. Установите Poetry:
   ```bash
   pip install poetry==1.8.3
   ```
3. Установите зависимости:
   ```bash
   poetry install --no-dev
   ```
4. Создайте файл `.env` на основе `.env.example`:
   ```bash
   cp .env.example .env
   ```
5. Запустите сервер:
   ```bash
   poetry run uvicorn src.main:app --reload --port 8000
   ```
6. Откройте Swagger UI:
   ```
   http://localhost:8000/docs
   ```

#### Docker

1. Клонируйте репозиторий и создайте `.env`:
   ```bash
   git clone <repository-url>
   cd TestWise/Backend
   cp .env.example .env
   ```
2. Запустите:
   ```bash
   docker-compose up --build
   ```
3. Swagger UI: http://localhost:8000/docs

### FrontEnd

1. Перейдите в папку FrontEnd:
   ```bash
   cd TestWise/FrontEnd
   ```
2. Установите зависимости:
   ```bash
   npm install
   ```
3. Запустите dev-сервер:
   ```bash
   npm run dev
   ```
4. Откройте http://localhost:8080

---

## Структура проекта

```
TestWise/
  Backend/         # Бэкенд (FastAPI, Python)
    src/
      api/v1/      # Все роутеры и схемы API
      domain/      # Модели и enum
      repository/  # Логика работы с БД
      service/     # Бизнес-логика
      database/    # Работа с БД и бэкапами
      config/      # Настройки и логирование
      security/    # Безопасность
      utils/       # Вспомогательные утилиты
    requirements.txt
    pyproject.toml
    Dockerfile
    docker-compose.yml
  FrontEnd/        # Фронтенд (React, TypeScript)
    src/
      pages/       # Страницы приложения
      components/  # UI и бизнес-компоненты
      services/    # API-клиенты
      context/     # Контексты React
      hooks/       # Пользовательские хуки
    public/        # Статические файлы
    package.json
    vite.config.ts
```

---

## Контакты

- Email: support@testwise.com
- Телефон: +7 (999) 123-45-67
- Адрес: 123456, г. Санкт-Петербург, ул. Лоцманская д. 3

---

## Лицензия

Все права защищены. Использование материалов возможно только с письменного разрешения правообладателя. 